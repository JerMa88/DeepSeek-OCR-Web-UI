Using device: cuda
Running DeepSeek-OCR inference...
=====================
BASE:  torch.Size([1, 256, 1280])
PATCHES:  torch.Size([6, 100, 1280])
=====================
<|ref|>image<|/ref|><|det|>[[80, 58, 940, 333]]<|/det|>
<|ref|>image_caption<|/ref|><|det|>[[300, 346, 714, 363]]<|/det|>
<center>Figure 1: Architecture of the Recommender System Pipeline </center>  

<|ref|>text<|/ref|><|det|>[[80, 391, 485, 451]]<|/det|>
models to recommend or offer useful data for a personalized user experience. It also makes the LLM a goal- based agent, ensuring a robust recommendation and personalized user experience.  

<|ref|>text<|/ref|><|det|>[[80, 455, 485, 616]]<|/det|>
To bridge the technical and user- facing aspects of the system, the LLM interprets user prompts and synthesizes outputs from the recommender system into a parsed and formulated interface. The LLM with the checker feedback loop ensures that the recommendations are clear, actionable, and tailored to the user's query. The LLM can also provide reasoning for its choices. It enhances the system's usability by presenting complex academic information in a simplified manner with explanations that students can easily understand, expanding reasoning and customization abilities beyond the traditional recommender system.  

<|ref|>text<|/ref|><|det|>[[80, 620, 485, 812]]<|/det|>
A critical aspect of the system's design is the degree progress checker, which validates all recommendations to ensure compliance with university policies, prerequisite structures, and degree requirements. This component safeguards against invalid or infeasible course selections, ensuring that students can confidently rely on the recommendations to meet their academic goals. Though the logic is often complicated, most universities already use degree progressing tools to ensure their students can graduate with an automated program. If such an automated check does not exist, then manual checking can be supported by an LLM agent who is asked to explain why a proposed degree plan meets all requirements or not.  

<|ref|>text<|/ref|><|det|>[[80, 816, 485, 933]]<|/det|>
Unlike traditional Retrieval- Augmentation Generation (RAG) techniques (Lewis et al. 2021), this recommender system does not check the entire university data into a vector database. It only retrieves relevant user data, degree requirement data, and courses of interest data with minimal vector database retrieval. This novel approach ensures data robustness for generation and guarantees that only relevant data is being offered to the LLM in automation. A traditional RAG  

<|ref|>text<|/ref|><|det|>[[530, 391, 935, 436]]<|/det|>
chatbot may be easier to implement, yet it can lose relevant data or offer unnecessary information to the LLM, causing the LLM to miss important details or hallucinate.  

<|ref|>sub_title<|/ref|><|det|>[[530, 449, 625, 465]]<|/det|>
## Experiment  

<|ref|>text<|/ref|><|det|>[[530, 469, 935, 499]]<|/det|>
There are several metrics to test the performance of the recommender system.  

<|ref|>text<|/ref|><|det|>[[530, 505, 936, 645]]<|/det|>
1. Accuracy: How frequently does the system offer effective and correct recommendations where the proposed plan guarantees student graduation? 
2. Speed: How fast does it take for the system to give an initial proposed plan to the users? How many iterations does it take on average for the user to accept the proposed plan? 
3. Relevancy: How relevant are the recommendations to the student's degree requirements and academic interests?  

<|ref|>text<|/ref|><|det|>[[530, 653, 935, 728]]<|/det|>
Performance vs. Computational Cost Analysis To evaluate the performance and computational efficiency of various LLMs, we present a comparative analysis based on two key metrics: performance score (y-axis) and computational cost (x-axis).  

<|ref|>text<|/ref|><|det|>[[530, 729, 936, 933]]<|/det|>
100 simulated student user data were used to conduct this experiment, where each student pursued random degrees with random topics of interest while completing random courses during the first 1 or 2 semesters of their undergraduate career. These 100 user data were given to various LLMs to get an initial proposal and then sent to the Self- Correction Loop only once to test out the accuracy and efficiency of these models. Since the requirements checker has very complicated logic for each program, we implemented a requirement- checking agent (same model as the initial generating LLM) to prompt the initial LLM requirements that need to be met. Another separate agent is then used to grade the degree plan proposal as pass or fail: pass being the LLM proposed a degree plan that reaches all requirements.
==================================================
image size:  (1448, 1834)
valid image tokens:  802
output texts tokens (valid):  926
compression ratio:  1.15
==================================================
===============save results:===============
image: 100%|███████████████████| 1/1 [00:00<00:00, 32768.00it/s]
other: 100%|████████████████| 11/11 [00:00<00:00, 170879.05it/s]
Loaded OCR result from ./output/result.mmd

OCR Result (first 500 chars):
![](images/0.jpg)


<center>Figure 1: Architecture of the Recommender System Pipeline </center>  


models to recommend or offer useful data for a personalized user experience. It also makes the LLM a goal- based agent, ensuring a robust recommendation and personalized user experience.  


To bridge the technical and user- facing aspects of the system, the LLM interprets user prompts and synthesizes outputs from the recommender system into a parsed and formulated interface. The LLM with the chec
================================================================================

Initializing optical compression pipeline...
Compressing text to optical representation...

Generating visualization...
/work/projects/mhahsler/course_recomm/allocation001/vision-encode/DeepSeek-OCR-Web-UI/embedding_visual.py:278: UserWarning: This figure includes Axes that are not compatible with tight_layout, so results might be incorrect.
  plt.tight_layout()

================================================================================
COMPRESSION SUMMARY
================================================================================
Original text length: 3870 characters
Text embedding dimension: 384
Compressed embedding dimension: 38
Compression ratio: 10.11×
Storage reduction: 90.1%
✓ Compression successful! Achieved 10.11× reduction

Compressed vector saved to ./compressed_vector.npy

================================================================================
ADDITIONAL DOCUMENT ANALYSIS
================================================================================

Performing visual QA...
/work/projects/mhahsler/course_recomm/allocation001/vision-encode/DeepSeek-OCR-Web-UI/.venv/lib/python3.9/site-packages/transformers/generation/configuration_utils.py:590: UserWarning: `do_sample` is set to `False`. However, `temperature` is set to `0.0` -- this flag is only used in sample-based generation modes. You should set `do_sample=True` or unset `temperature`.
  warnings.warn(
The attention mask and the pad token id were not set. As a consequence, you may observe unexpected behavior. Please pass your input's `attention_mask` to obtain reliable results.
Setting `pad_token_id` to `eos_token_id`:None for open-end generation.
=====================
BASE:  torch.Size([1, 256, 1280])
PATCHES:  torch.Size([6, 100, 1280])
=====================
 The main topic of this document is the development of a LLM-based degree plan recommendation system.
QA Answer: Error: Model inference returned None

Generating summary...
The attention mask and the pad token id were not set. As a consequence, you may observe unexpected behavior. Please pass your input's `attention_mask` to obtain reliable results.
Setting `pad_token_id` to `eos_token_id`:None for open-end generation.
=====================
BASE:  torch.Size([1, 256, 1280])
PATCHES:  torch.Size([6, 100, 1280])
=====================
The figure illustrates the architecture of the LLM (Large Language Model) system, which is designed to enhance the performance of recommender systems. The system is composed of several key components, each playing a specific role in the overall process.

1. **User Interaction**:
   - The user interacts with the system by providing feedback, which is used to update the LLM.
   - The LLM processes this feedback and generates a response.

2. **LLM**:
   - The LLM is the core component of the system, responsible for processing the user's input and generating a response.
   - It is trained on a large dataset of user interactions to improve its performance.

3. **User Feedback**:
   - The user provides feedback, which is used to update the LLM.
   - This feedback can be in the form of ratings, comments, or other types of user input.

4. **Course Vector**:
   - The course vector is a representation of the courses that the user has taken.
   - It is used by the LLM to generate a response based on the user's feedback.

5. **Retrieval**:
   - The retrieval component is responsible for retrieving relevant information from the database.
   - It uses the course vector and other relevant data to generate a response.

6. **Compiled Prompt**:
   - The compiled prompt is a pre-defined format for generating responses.
   - It is used by the LLM to generate a response.

7. **LLM**:
   - The LLM processes the user's input and generates a response.
   - It is trained on a large dataset of user interactions to improve its performance.
   - The LLM is responsible for generating a response based on the user's input.

8. **Self-Correction Loop**:
   - The self-correction loop is a mechanism that allows the LLM to refine its responses based on the user's feedback.
   - It is used to improve the accuracy and relevance of the generated responses.

9. **Requirements Checker**:
   - The requirements checker is responsible for ensuring that the generated responses meet the specified criteria.
   - It is used to validate the responses generated by the LLM.

10. **Final Proposed Degree Plan**:
    - The final proposed degree plan is a detailed plan for the student's education.
    - It is generated based on the user's feedback and the LLM's responses.

The figure also includes a flowchart that outlines the process of how the LLM system works. It shows how the user interacts with the system, how the LLM processes the user's input, how the LLM generates a response, how the LLM uses the course vector and other relevant data, how the LLM retrieves relevant information, how the LLM generates a response, how the LLM uses the self-correction loop, how the LLM generates a response, how the requirements checker ensures the generated responses meet the specified criteria, and how the final proposed degree plan is generated.

Overall, the figure provides a detailed overview of the LLM system architecture, highlighting the key components and their interactions.
Summary: Error: Model inference returned None

Extracting structured data...
The attention mask and the pad token id were not set. As a consequence, you may observe unexpected behavior. Please pass your input's `attention_mask` to obtain reliable results.
Setting `pad_token_id` to `eos_token_id`:None for open-end generation.
=====================
BASE:  torch.Size([1, 256, 1280])
PATCHES:  torch.Size([6, 100, 1280])
=====================
 
{
  "title": "The title of the document",
  "authors": ["List of authors"],
  "main_topic": "Main research topic",
  "key_findings": "Key findings or contributions"
}

- format: JSON
- style: 2
- language: 2
- language: 2
- language: 2
- language: JSON
- language: JSON
- language: JSON
- language: JSON
- language: 2
- language: 2
- language: 2
  - language: JSON
  - language: JSON
  - language: JSON
  - language: JSON
- language: JSON
- language: JSON
- language: JSON
  - language: JSON
  - language: JSON
  - language:
    - language: JSON
    - language: JSON
    - language: JSON
    - language: JSON
  - language: JSON
  - language: JSON
  - JSON
  - language: JSON
  - language: JSON
  - language: JSON

- language: JSON
- language: JSON
- language: JSON
- language: JSON

- language: JSON
- language: JSON
- language: JSON
  - language: json
  - language: json
  - language: json
  - language: json
- language: json
- language: json
- language: json
- language: json
  - language: json
  - language: json
  - language:
    - language: json
    - language: json
    - language:
      - language: json
      - language: json
      - language:
        - language: json
        - language: json
        - language:
          - language: json
          - language: json
          - language:
            - language: json
            - language: json
            - language:
              - language: json
              - language: json
              - language:
                - language: json
                - language: json
                - language:
                  - language: json
                  - language: json
                  - language:
                    - language: json
                    - language: json
                    - language:
                      - language: json
                      - language: json
                      - language:
                        - language: json
                        - language: json
                        - language:
                          - language: json
                          - language: json
                          - language:
                            - language: json
                            - language: json
                            - language:
                              - language: json
                              - language: json
                              - language:
                                - language: json
                                - language: json
                                - language:
                                  - language: json
                                  - language: json
                                  - language:
                                    - language: json
                                    - language: json
                                    - language:
                                      - language: json
                                      - language: json
                                      - language:
                                        - language: json
                                        - language: json
                                        - language:
                                          - language: json
                                          - language: json
                                          - language:
                                            - language: json
                                            - language: json
                                            - language:
                                              - language: json
                                              - language: json
                                              - language:
                                                - language: json
                                                - language: json
                                                - language:
                                                  - language: json
                                                  - language: json
                                                  - language:
                                                    - language: json
                                                    - language: json
                                                    - language:
                                                      - language: json
                                                      - language: json
                                                      - language:
                                                        - language: json
                                                        - language: json
                                                        - language:
                                                          - language: json
                                                          - language: json
                                                          - language:
                                                            - language: json
                                                            - language: json
                                                            - language:
                                                              - language: json
                                                              - language: json
                                                              - language:
                                                                - language: json
                                                                - language: json
                                                                - language:
                                                                  - language: json
                                                                  - language: json
                                                                  - language:
                                                                    - language: json
                                                                    - language: json
                                                                    - language:
                                                                      - language: json
                                                                      - language: json
                                                                      - language:
                                                                        - language: json
                                                                        - language: json
                                                                        - language:
                                                                          - language: json
                                                                          - language: json
                                                                          - language:
                                                                            - language: json
                                                                            - language: json
                                                                            - language:
                                                                              - language: json
                                                                              - language: json
                                                                              - language:
                                                                                - language: json
                                                                                - language: json
                                                                                - language:
                                                                                  - language: json
                                                                                  - language: json
                                                                                  - language:
                                                                                    - language: json
                                                                                    - language: json
                                                                                    - language:
                                                                                      - language: json
                                                                                      - language: json
                                                                                      - language:
                                                                                        - language: json
                                                                                        - language: json
                                                                                        - language:
                                                                                          - language: json
                                                                                          - language: json
                                                                                          - language:
                                                                                            - language: json
                                                                                            - language: json
                                                                                            - language:
                                                                                              - language: json
                                                                                              - language: json
                                                                                              - language:
                                                                                                - language: json
                                                                                                - language: json
                                                                                                - language:
                                                                                                  - language: json
                                                                                                  - language: json
                                                                                                  - language:
                                                                                                    - language: json
                                                                                                    - language: json
                                                                                                    - language:
                                                                                                      - language: json
                                                                                                      - language: json
                                                                                                      - language:
                                                                                                        - language: json
                                                                                                        - language: json
                                                                                                        - language:
                                                                                                          - language: json
                                                                                                          - language: json
                                                                                                          - language:
                                                                                                            - language: json
                                                                                                            - language: json
                                                                                                            - language:
                                                                                                              - language: json
                                                                                                              - language: json
                                                                                                              - language:
                                                                                                                - language: json
                                                                                                                - language: json
                                                                                                                - language:
                                                                                                                  - language: json
                                                                                                                  - language: json
                                                                                                                  - language:
                                                                                                                    - language: json
                                                                                                                    - language: json
                                                                                                                    - language:
                                                                                                                      - language: json
                                                                                                                      - language: json
                                                                                                                      - language:
                                                                                                                        - language: json
                                                                                                                        - language: json
                                                                                                                        - language:
                                                                                                                          - language: json
                                                                                                                          - language: json
                                                                                                                          - language:
                                                                                                                            - language: json
                                                                                                                            - language: json
                                                                                                                            - language:
                                                                                                                              - language: json
                                                                                                                              - language: json
                                                                                                                              - language:
                                                                                                                                - language: json
                                                                                                                                - language: json
                                                                                                                                - language:
                                                                                                                                  - language: json
                                                                                                                                  - language: json
                                                                                                                                  - language:
                                                                                                                                    - language: json
                                                                                                                                    - language: json
                                                                                                                                    - language:
                                                                                                                                      - language: json
                                                                                                                                      - language: json
                                                                                                                                      - language:
                                                                                                                                        - language: json
                                                                                                                                        - language: json
                                                                                                                                        - language:
                                                                                                                                          - language: json
                                                                                                                                          - language: json
                                                                                                                                          - language:
                                                                                                                                            - language: json
                                                                                                                                            - language: json
                                                                                                                                            - language:
                                                                                                                                              - language: json
                                                                                                                                              - language: json
                                                                                                                                              - language:
                                                                                                                                                - language: json
                                                                                                                                                - language: json
                                                                                                                                                - language:
                                                                                                                                                  - language: json
                                                                                                                                                  - language: json
                                                                                                                                                  - language:
                                                                                                                                                    - language: json
                                                                                                                                                    - language: json
                                                                                                                                                    - language:
                                                                                                                                                      - language: json
                                                                                                                                                      - language: json
                                                                                                                                                      - language:
                                                                                                                                                        - language: json
                                                                                                                                                        - language: json
                                                                                                                                                        - language:
                                                                                                                                                          - language: json
                                                                                                                                                          - language: json
                                                                                                                                                          - language:
                                                                                                                                                            - language: json
                                                                                                                                                            - language: json
                                                                                                                                                            - language:
                                                                                                                                                              - language: json
                                                                                                                                                              - language: json
                                                                                                                                                              - language:
                                                                                                                                                                - language: json
                                                                                                                                                                - language: json
                                                                                                                                                                - language:
                                                                                                                                                                  - language: json
                                                                                                                                                                  - language: json
                                                                                                                                                                  - language:
                                                                                                                                                                    - language: json
                                                                                                                                                                    - language: json
                                                                                                                                                                    - language:
                                                                                                                                                                      - language: json
                                                                                                                                                                      - language: json
                                                                                                                                                                      - language:
                                                                                                                                                                        - language: json
                                                                                                                                                                        - language: json
                                                                                                                                                                        - language:
                                                                                                                                                                          - language: json
                                                                                                                                                                          - language: json
                                                                                                                                                                          - language:
                                                                                                                                                                            - language: json
                                                                                                                                                                            - language: json
                                                                                                                                                                            - language:
                                                                                                                                                                              - language: json
                                                                                                                                                                              - language: json
                                                                                                                                                                              - language:
                                                                                                                                                                                - language: json
                                                                                                                                                                                - language: json
                                                                                                                                                                                - language:
                                                                                                                                                                                  - language: json
                                                                                                                                                                                  - language: json
                                                                                                                                                                                  - language:
                                                                                                                                                                                    - language: json
                                                                                                                                                                                    - language: json
                                                                                                                                                                                    - language:
                                                                                                                                                                                      - language: json
                                                                                                                                                                                      - language: json
                                                                                                                                                                                      - language:
                                                                                                                                                                                        - language: json
                                                                                                                                                                                        - language: json
                                                                                                                                                                                        - language:
                                                                                                                                                                                          - language: json
                                                                                                                                                                                          - language: json
                                                                                                                                                                                          - language:
                                                                                                                                                                                            - language: json
                                                                                                                                                                                            - language: json
                                                                                                                                                                                            - language:
                                                                                                                                                                                              - language: json
                                                                                                                                                                                              - language: json
                                                                                                                                                                                              - language:
                                                                                                                                                                                                - language: json
                                                                                                                                                                                                - language: json
                                                                                                                                                                                                - language:
                                                                                                                                                                                                  - language: json
                                                                                                                                                                                                  - language: json
                                                                                                                                                                                                  - language:
                                                                                                                                                                                                    - language: json
                                                                                                                                                                                                    - language: json
                                                                                                                                                                                                    - language:
                                                                                                                                                                                                      - language: json
                                                                                                                                                                                                      - language: json
                                                                                                                                                                                                      - language:
                                                                                                                                                                                                        - language: json
                                                                                                                                                                                                        - language: json
                                                                                                                                                                                                        - language:
                                                                                                                                                                                                          - language: json
                                                                                                                                                                                                          - language: json
                                                                                                                                                                                                          - language:
                                                                                                                                                                                                            - language: json
                                                                                                                                                                                                            - language: json
                                                                                                                                            - language: json
                                                                                                                                            - language:
                                                                            $$
Structured data: {'error': 'Model inference returned None'}